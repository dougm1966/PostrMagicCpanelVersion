; PostrMagic PHP Configuration
; This file contains recommended PHP settings for PostrMagic

[PHP]
; Error handling
error_reporting = E_ALL
display_errors = On
display_startup_errors = On
log_errors = On
track_errors = On

; File Uploads
file_uploads = On
upload_max_filesize = 10M
post_max_size = 12M
max_file_uploads = 20

; Session settings
session.save_handler = files
session.use_strict_mode = 1
session.use_cookies = 1
session.use_only_cookies = 1
session.name = POSTRMAGIC_SESSION
session.cookie_httponly = 1
session.cookie_secure = 1
session.cookie_samesite = "Lax"

; Timezone
date.timezone = "UTC"

; Memory and Execution Time
memory_limit = 256M
max_execution_time = 300
max_input_time = 300

; OPCache (for production)
opcache.enable=1
opcache.memory_consumption=128
opcache.max_accelerated_files=10000
opcache.validate_timestamps=1
opcache.revalidate_freq=60

; Disable dangerous functions
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source

; Disable PHP version exposure
expose_php = Off

; Character encoding
default_charset = "UTF-8"

; Disable remote file inclusion
allow_url_fopen = Off
allow_url_include = Off

; Disable dangerous PHP functionality
enable_dl = Off

; Set secure session settings
session.cookie_httponly = 1
session.cookie_secure = 1
session.use_strict_mode = 1
session.cookie_samesite = "Lax"

; Disable session ID in URLs
session.use_trans_sid = 0
session.use_only_cookies = 1

; Disable exposing PHP version in headers
; Note: This is a fallback if the .htaccess header is not working
expose_php = Off

; Disable remote code execution
allow_url_fopen = Off
allow_url_include = Off

; Disable dangerous PHP functions
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source

; Increase memory limit for image processing
memory_limit = 256M

; Increase max execution time for large uploads
max_execution_time = 300

; Increase max input time
max_input_time = 300

; Increase the maximum number of files that can be uploaded
max_file_uploads = 20

; Increase the maximum size of POST data
post_max_size = 12M

; Increase the maximum size of uploaded files
upload_max_filesize = 10M

; Set the maximum number of input variables
max_input_vars = 3000

; Set the maximum nesting level of the stack
yaml.max_recursion_depth = 1000

; Set the maximum number of open files
rlimit_files = 10000

; Set the maximum number of processes
rlimit_core = 0

; Disable magic quotes
magic_quotes_gpc = Off

; Disable register globals
register_globals = Off

; Disable automatic session start
auto_start = Off

; Disable HTML error messages
html_errors = Off

; Enable error logging
log_errors = On
error_log = /path/to/php-error.log

; Set the error reporting level
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT

; Set the default timezone
date.timezone = "UTC"

; Set the default character set
default_charset = "UTF-8"

; Set the default MIME type
default_mimetype = "text/html"

; Set the default MIME type for HTML
default_mimetype = "text/html"

; Set the default MIME type for JavaScript
default_mimetype = "application/javascript"

; Set the default MIME type for CSS
default_mimetype = "text/css"

; Set the default MIME type for JSON
default_mimetype = "application/json"

; Set the default MIME type for XML
default_mimetype = "application/xml"

; Set the default MIME type for images
default_mimetype = "image/*"

; Set the default MIME type for audio
default_mimetype = "audio/*"

; Set the default MIME type for video
default_mimetype = "video/*"

; Set the default MIME type for fonts
default_mimetype = "font/*"

; Set the default MIME type for archives
default_mimetype = "application/zip"

; Set the default MIME type for PDF
default_mimetype = "application/pdf"

; Set the default MIME type for text files
default_mimetype = "text/plain"

; Set the default MIME type for binary files
default_mimetype = "application/octet-stream"

; Set the default MIME type for unknown file types
default_mimetype = "application/octet-stream"
